{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %} {% endblock %}</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    {#    faveicons#}
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="{% static 'favicon/apple-touch-icon-57x57.png' %}"/>
    <link rel="apple-touch-icon-precomposed" sizes="114x114"
          href=" {% static 'favicon/apple-touch-icon-114x114.png' %}"/>
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="{% static 'favicon/apple-touch-icon-72x72.png' %}"/>
    <link rel="apple-touch-icon-precomposed" sizes="144x144"
          href="{% static 'favicon/apple-touch-icon-144x144.png' %}"/>
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="{% static 'favicon/apple-touch-icon-60x60.png' %}"/>
    <link rel="apple-touch-icon-precomposed" sizes="120x120"
          href="{% static 'favicon/apple-touch-icon-120x120.png' %} "/>
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="{% static 'favicon/apple-touch-icon-76x76.png' %}"/>
    <link rel="apple-touch-icon-precomposed" sizes="152x152"
          href="{% static 'favicon/apple-touch-icon-152x152.png' %}"/>
    <link rel="icon" type="image/png" href="{% static 'favicon/favicon-196x196.png' %}" sizes="196x196"/>
    <link rel="icon" type="image/png" href="{% static 'favicon/favicon-96x96.png' %}" sizes="96x96"/>
    <link rel="icon" type="image/png" href="{% static 'favicon/favicon-32x32.png' %}" sizes="32x32"/>
    <link rel="icon" type="image/png" href="{% static 'favicon/favicon-16x16.png' %}" sizes="16x16"/>
    <link rel="icon" type="image/png" href="{% static 'favicon/favicon-128.png' %}" sizes="128x128"/>

    <meta name="application-name" content="&nbsp;"/>
    <meta name="msapplication-TileColor" content="#FFFFFF"/>
    <meta name="msapplication-TileImage" content="mstile-144x144.png"/>
    <meta name="msapplication-square70x70logo" content="mstile-70x70.png"/>
    <meta name="msapplication-square150x150logo" content="mstile-150x150.png"/>
    <meta name="msapplication-wide310x150logo" content="mstile-310x150.png"/>
    <meta name="msapplication-square310x310logo" content="mstile-310x310.png"/>

    {% comment %}  **boot**  {% endcomment %}
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.css">

    <script>
        new WOW().init();

        var wow = new WOW(
            {
                boxClass: 'wow',      // animated element css class (default is wow)
                animateClass: 'animated', // animation css class (default is animated)
                offset: 0,          // distance to the element when triggering the animation (default is 0)
                mobile: true,       // trigger animations on mobile devices (default is true)
                live: true,       // act on asynchronously loaded content (default is true)
                callback: function (box) {
                    // the callback is fired every time an animation is started
                    // the argument that is passed in is the DOM node being animated
                },
                scrollContainer: null // optional scroll container selector, otherwise use window
            }
        );
        wow.init();
    </script>


    {% block extra_head_at_end %}

    {% endblock %}


    <style>
        {% comment %}        body{
                    background-image: url("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQByf_x1jOhHRrRfoZ2me4PiVnmsdwH3u4ZVCtRWSDUluMAjONX");
                }{% endcomment %}
        @import url('https://fonts.googleapis.com/css?family=Luckiest+Guy&display=swap');
        @import url('https://fonts.googleapis.com/css?family=Londrina+Solid&display=swap');


        #id_title {
            margin-left: 3.5rem;
        }

        .input_here {
            margin-left: 0.5rem;
        }

        #title_it {
            font-family: 'Londrina Solid', 'Luckiest Guy', cursive;
        }

        textarea {
            border-radius: 0.5rem;
            background-color: #3C8FC2;
            color: white;
            font-weight: bold;
            font-size: medium;
        }

        ::-webkit-input-placeholder {
            color: white;
        }

        ::-moz-placeholder {
            color: white;
        }

        {% comment %}        ::-ms-placeholder {
                    color: white;
                }{% endcomment %}

        ::placeholder {
            color: lightgray;
        }

        label {
            font-style: italic;
            font-weight: bold;
        }


        .success_it {
            -webkit-animation: seconds 1.0s forwards;
            -webkit-animation-iteration-count: 1;
            -webkit-animation-delay: 5s;
            animation: seconds 1.0s forwards;
            animation-iteration-count: 1;
            animation-delay: 3s;
            position: relative;

        }

        @-webkit-keyframes seconds {
            0% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                left: -9999px;
                position: absolute;
            }
        }

        @keyframes seconds {
            0% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                left: -9999px;
                position: absolute;
            }
        }

        #id_title {
            margin-left: 1.2%;
        }

        #chars {
            padding-left: 12%;
        }

        .count-chars {
            padding: 0;
            margin: 0;
        }




        /*base px == 16*/

        @media (min-width: 20em) {

            /*320px*/
            /* smartphones, iPhone, portrait 480x320 phones */
            .date-it {
                font-size: 1vw;
            }

            .posting {
                font-size: 0.1vw;
            }

            .title-it {
                font-size: 1.5vw;
            }


        }

        /*481px*/
        @media (min-width: 30em) {

            /* portrait e-readers (Nook/Kindle), smaller tablets @ 600 or @ 640 wide. */
            .posting {
                font-size: 3vw;
            }

            .date-it {
                font-size: 2vw;
            }

            .title-it {
                font-size: 4vw;
            }
        }

        @media (min-width: 40em) {

            /* portrait tablets, portrait iPad, landscape e-readers, landscape 800x480 or 854x480 phones */
            .posting {
                font-size: 3vw;
            }

            .date-it {
                font-size: 1.5vw;
            }

            .title-it {
                font-size: 3.5vw;
            }
        }

        @media (min-width: 60em) {

            /* tablet, landscape iPad, lo-res laptops ands desktops */
            .posting {
                font-size: 2vw;
            }

            .date-it {
                font-size: 1vw;
            }

            .title-it {
                font-size: 2.6vw;
            }
        }

        @media (min-width: 64em) {

            /* big landscape tablets, laptops, and desktops */
            .posting {
                font-size: 1.8vw;
            }

            .date-it {
                font-size: 1vw;
            }

            .title-it {
                font-size: 2vw;
            }

        }

        @media (min-width: 80em) {

            /* hi-res laptops and desktops */
            .posting {
                font-size: 1.5vw;
            }

            .date-it {
                font-size: 0.6vw;
            }

            .title-it {
                font-size: 2vw;
            }
        }
    </style>

    {% block style %}


    {% endblock %}

</head>


<body>
{% if messages %}
    <div class="alert-success success_it">
        {% for message in messages %}

            {#            p-3 mb-2 bg-success text-white#}

            <p{% if message.tags %} class="{{ message.tags }}"

            {% endif %}>
                {{ message }}
            </p>
        {% endfor %}
    </div>
{% endif %}


{#<h1 class="wow lightSpeedIn" id="title_it">Wall of Frustrations</h1>#}

<div style="width: 80%">
    {% block logo %}

        <a href="{% url 'secretes' %}">
            <img src="{% static  'wall headers/wall of secretes.png' %}" class="img-fluid" id="title_it"
                 alt="website logo"
                 style="max-height: 5rem;" title="uggghhhh">
        </a>

    {% endblock %}
</div>

<div class="form-group container-fluid wow fadeInRight" style="padding: 1rem;">
    <div class="row">

        <div class="col-12 col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-8">
            <form method="post" action="" name="posting" style="width: 80%" class="">

                {% csrf_token %}
                {{ postF.as_p }}
                <span id="chars">240</span> characters remaining
                <br>

                <input type="submit" hidden name="posted" value="this_post">
                <button type="submit" class="btn btn-primary" onsubmit="" style="size: 20rem">save</button>
                <br>
                <br>
            </form>

        </div>
    </div>
</div>


{% for posts in all %}

    <div class="row">
        <div class="container-fluid">
            <div class="col-12 col-xs-12 col-sm-12 col-md-12 col-lg-10 col-xl-8" style="padding: 1.5rem;">


                {% block if_block %}

                {% endblock %}


                <div class="card text-white {% block card_color %} bg-danger {% endblock %} mb-3 wow
                    {% block animate %}fadeInRight {% endblock %}"
                     style="max-width: 60rem;"
                     title="{% block card_title %} Post {% endblock %}">


                    <div class="card-body" style="{% block extra_post_style %} {% endblock %};">

                        {% if posts.title == None %}

                        {% else %}
                            <bold>
                                <span class="card-title title-it"
                                      style="font-weight: bolder">{{ posts.title }}</span>
                            </bold>
                        {% endif %}

                        <p class="card-text posting">{% block postings %} {% endblock %}</p>
                        <span class="date-it">{{ posts.date_and_time }}</span>


                        <p id="{{ posts.salted_pk }}">{{ posts.vote }}</p>


                        <div class="btn-group btn-group-toggle" data-toggle="buttons">

                            {% csrf_token %}
                            <div class="btn {% block up_btn_color %} btn-primary {% endblock %}">
                                <button id="{{ posts.salted_pk }}" type="submit" title="up vote" name="up_voted_It"
                                        value={{ posts.salted_pk }} class="" style="size: 9rem"
                                        onclick="vote_here(this.name, this.value)"><i class="fas fa-arrow-up"></i>
                                </button>
                            </div>


                            <div class="btn {% block down_btn_color %} btn-dark {% endblock %}">
                                <button type="submit" name="down_voted_It" title="down vote"
                                        value={{ posts.salted_pk }} class=""
                                        onclick="vote_here(this.name, this.value)"><i class="fas fa-arrow-down"></i>
                                </button>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>
    </div>

    <br>
{% endfor %}

<br>


<script>


    function vote_here(name, value) {
        const url_of_this_page = window.location.href;
        let data = {
            Name: name,
            Value: value
        };
        $(document).ready(function () {
            $.ajax({
                type: "POST",
                url: url_of_this_page,
                dataType: 'json',
                headers: {
                    "Content-Type": "application/json",
                    "X-CSRFToken": csrftoken,
                },
                data: JSON.stringify(data),

                success: function () {
                    {#console.log("$.ajax = success");#}
                    console.log("up voottteeeee!!!!")
                },
                error: {
                    function() {
                        console.log("#.ajax == failure");
                    },
                },
            });

        });

        let current_number = parseInt(document.getElementById(value).innerText);

        if (name === 'up_voted_It') {
            current_number = current_number + 1;
            document.getElementById(value).innerHTML = (current_number);
        } else if (name === 'down_voted_It') {
            current_number = current_number - 1;
            document.getElementById(value).innerHTML = (current_number);
        } else {

        }
    }


    // using jQuery
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }


    var csrftoken = getCookie('csrftoken');


    let maxLength = 240;
    $('#main-text').keyup(function () {
        let length = $(this).val().length;
        let lengths = maxLength - length;
        $('#chars').text(lengths);
    });

    if (window.history.replaceState) {
        window.history.replaceState(null, null, window.location.href);
    }
</script>



{% block body %}


{% endblock %}
</body>
</html>